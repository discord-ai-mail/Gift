<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Laya 🎉</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap');

  body {
    margin: 0;
    min-height: 100vh;
    background: black;
    color: white;
    font-family: 'Poppins', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    overflow-y: auto;
    text-align: center;
    padding: 40px 10px;
    /* Default size adjustments for better automatic scaling */
    font-size: 1rem; 
  }

  h1 {
    font-size: 3rem;
    color: #ff66b2;
    margin-bottom: 10px;
    text-shadow: 0 0 20px #ff66b2;
  }

  h3 {
    font-family: 'Great Vibes', cursive;
    font-size: 2rem;
    color: #ffccff;
    margin: 0;
  }

  button {
    margin-top: 20px;
    padding: 15px 30px;
    font-size: 1.2rem;
    border: none;
    border-radius: 50px;
    background: linear-gradient(45deg, #ff66b2, #b366ff);
    color: white;
    cursor: pointer;
    box-shadow: 0 0 15px #b366ff;
    transition: all 0.3s ease;
  }

  button:hover {
    transform: scale(1.08);
    box-shadow: 0 0 25px #ff66b2;
  }

  #photoContainer {
    display: none;
    position: relative;
    margin-top: 20px;
  }

  #photo {
    width: 300px;
    max-width: 80vw;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
    transition: all 0.5s ease;
    cursor: pointer;
  }

  #downloadOverlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    background: rgba(0,0,0,0.5);
    color: #fff;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  #photoContainer:hover #downloadOverlay {
    opacity: 1;
  }

  #message {
    margin: 20px auto;
    width: 85%;
    max-width: 700px;
    font-size: 1rem;
    line-height: 1.6;
    display: none;
  }

  a {
    color: #ff66b2;
    text-decoration: none;
  }

  .emoji {
    position: fixed;
    bottom: 0;
    font-size: 1.5rem;
    animation: floatUp 4s linear forwards;
    pointer-events: none;
  }

  @keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-100vh) scale(1.2); opacity: 0; }
  }

  .toast {
    position: fixed;
    bottom: 20px;
    background: rgba(255, 105, 180, 0.9);
    color: white;
    padding: 12px 25px;
    border-radius: 30px;
    font-size: 1rem;
    box-shadow: 0 0 15px #ff66b2;
    animation: fadeInOut 4s ease forwards;
  }

  @keyframes fadeInOut {
    0%,100% { opacity: 0; transform: translateY(30px); }
    10%,90% { opacity: 1; transform: translateY(0); }
  }

  #thankYou, #downloadAll {
    display: none;
  }

  /* Email Form Styling (New Section) */
  #emailFormContainer {
    display: none;
    background: rgba(255, 255, 255, 0.1);
    padding: 30px;
    border-radius: 20px;
    max-width: 500px;
    width: 90%;
    margin-top: 30px;
    box-shadow: 0 0 30px rgba(179, 102, 255, 0.5);
  }

  #emailFormContainer h2 {
    color: #ffccff;
  }

  #emailFormContainer label {
    display: block;
    text-align: left;
    margin-top: 15px;
    margin-bottom: 5px;
    color: #ffccff;
    font-weight: 600;
  }

  #emailFormContainer input[type="email"],
  #emailFormContainer textarea {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ff66b2;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
    font-family: 'Poppins', sans-serif;
  }

  #emailFormContainer textarea {
    resize: vertical;
    min-height: 100px;
  }

  #sendEmailBtn {
    margin-top: 25px;
    width: 100%;
    padding: 15px;
    background: linear-gradient(45deg, #b366ff, #ff66b2);
    box-shadow: 0 0 15px #b366ff;
  }

  /* Responsive Adjustments (Instead of Device Mode) */
  @media (max-width: 600px) {
    body {
      font-size: 0.9rem;
    }
    h1 {
      font-size: 2.2rem;
    }
    h3 {
      font-size: 1.5rem;
    }
    button {
      padding: 10px 25px;
      font-size: 1rem;
    }
    #photo {
      width: 80%;
    }
  }

</style>
</head>
<body>

<h1 id="helloText">Hello Laya</h1>
<h3 id="subText">Press below button</h3>
<button id="startBtn">Click Me</button>

<div id="photoContainer">
  <img id="photo" src="https://via.placeholder.com/300x400.png?text=Kowsi+Photo+1" alt="Kowsi Image">
  <div id="downloadOverlay">📸 Download Image</div>
</div>

<p id="message"></p>
<button id="thankYou">Thank You</button>
<button id="downloadAll">Download Image</button>

<div id="emailFormContainer">
    <h2>Send a Thank You Reply!</h2>
    <form id="emailForm">
        <label for="emailFrom">From:</label>
        <input type="email" id="emailFrom" placeholder="kowsi@example.com" required>

        <label for="emailTo">To:</label>
        <input type="email" id="emailTo" value="discordaimails@gmail.com" readonly required> 

        <label for="emailBody">Body of Thank You Message:</label>
        <textarea id="emailBody" placeholder="Thank you so much for the lovely birthday wish! I had a great day..." required></textarea>

        <button type="submit" id="sendEmailBtn">Send Reply</button>
    </form>
</div>
<script>
const startBtn = document.getElementById('startBtn');
const helloText = document.getElementById('helloText');
const subText = document.getElementById('subText');
const photoContainer = document.getElementById('photoContainer');
const photo = document.getElementById('photo');
const message = document.getElementById('message');
const thankYou = document.getElementById('thankYou');
const downloadAll = document.getElementById('downloadAll');
const emailFormContainer = document.getElementById('emailFormContainer');
const emailForm = document.getElementById('emailForm');


let images = [
  "./laya.png?text=Laya+Photo+1",
  "./laya 2.png?text=Laya+Photo+2"
];
let currentImage = 0;

startBtn.addEventListener('click', () => {
  helloText.textContent = "Happy Birthday";
  subText.textContent = "Laya"; 
  startBtn.style.display = "none";

  for (let i = 0; i < 20; i++) createEmoji(["🎈","🎊","✨","🎉"][Math.floor(Math.random()*4)]);

  setTimeout(() => {
    photoContainer.style.display = "block";
    setInterval(() => {
      currentImage = (currentImage + 1) % images.length;
      photo.src = images[currentImage];
    }, 4000);

    typeMessage();
    showToast("Hey Laya! You can download your image by clicking the image 💖");
  }, 1500);
});

function createEmoji(symbol) {
  const emoji = document.createElement("div");
  emoji.classList.add("emoji");
  emoji.textContent = symbol;
  emoji.style.left = Math.random() * 100 + "vw";
  emoji.style.fontSize = Math.random() * 2 + 1 + "rem";
  document.body.appendChild(emoji);
  setTimeout(() => emoji.remove(), 4000);
}

function typeMessage() {
  const text = `Happy Birthday Laya, This is your day and May your day filled with joy, surprise and blessed. All the best for your future and success in life. Stepping into another new adventurous page of your life. Thank you for your little contribution to our page. Have a great day with love 🫶<a href="https://instagram.com/celebmodeon" target="_blank">Celebmodeon</a>`;
  
  let i = 0;
  message.style.display = "block";
  function typing() {
    if (i < text.length) {
      message.innerHTML = text.slice(0, i++) + "▌";
      setTimeout(typing, 40);
    } else {
      message.innerHTML = text;
      thankYou.style.display = "inline-block";
      downloadAll.style.display = "inline-block";
    }
  }
  typing();
}

// *** UPDATED THANK YOU BUTTON FUNCTIONALITY ***
thankYou.addEventListener('click', () => {
  // Hide previous message and buttons
  message.style.display = "none";
  thankYou.style.display = "none";
  downloadAll.style.display = "none";
  photoContainer.style.display = "none";

  // Show the email form
  emailFormContainer.style.display = "block";
  showToast("Time to send a Thank You message to the sender! 💌");
  
  // Create a new set of emojis for the 'canva' feel
  for (let i = 0; i < 30; i++) createEmoji(["💖","💌","✨","🎂"][Math.floor(Math.random()*4)]);
});
// **********************************************

photoContainer.addEventListener('click', () => {
  const link = document.createElement('a');
  link.href = photo.src;
  link.download = "LayaBirthdayImage.png";
  link.click();
});

function showToast(msg) {
  const toast = document.createElement('div');
  toast.classList.add('toast');
  toast.textContent = msg;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 4000);
}

// ZIP download feature
downloadAll.addEventListener('click', async () => {
  const zip = new JSZip();
  const folder = zip.folder("Laya_Birthday_Images"); 
  
  for (let i = 0; i < images.length; i++) {
    const res = await fetch(images[i]); 
    const blob = await res.blob();
    folder.file(`Laya_Photo_${i+1}.png`, blob);
  }

  const content = await zip.generateAsync({ type: "blob" });
  saveAs(content, "LayaBirthdayPhotos.zip"); 
  showToast("🎁 Downloading all photos as ZIP...");
});

// Email Form Submission Handler: Now for sending a Reply/Thank You
emailForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const from = document.getElementById('emailFrom').value;
    const to = document.getElementById('emailTo').value;
    const body = document.getElementById('emailBody').value;
    
    // Subject is for a thank-you reply
    const subject = encodeURIComponent("Thank You for the Birthday Wish!");
    
    // Construct the mailto link. The 'From' field is placed in the body for context.
    const mailtoLink = `mailto:${to}?subject=${subject}&body=${encodeURIComponent(`[Reply from Laya]\n\nYour Email: ${from}\n\nMessage:\n${body}`)}`;
    
    window.location.href = mailtoLink;
    
    // Optional: Hide form and show a final thank you message
    emailFormContainer.style.display = 'none';
    helloText.textContent = "Reply Sent!";
    subText.textContent = "Thank you for sending your appreciation 💖";
    showToast("Opening your email client to send the thank you message! 🎉");
});

</script>
</body>
</html>
