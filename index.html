<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spotlight On: Kowsi ‚Äî CelebModeOn</title>
  <meta name="description" content="CelebModeOn ‚Äî Spotlight On: Kowsi | Digital Star Feature" />
  <style>
    :root{
      --bg1:#0f0b12; /* deep plum */
      --bg2:#2b2430; /* muted plum */
      --accent:#e6e0ff; /* soft silver */
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.04);
      --card-shadow: 0 8px 30px rgba(2,6,23,0.6);
      --radius:18px;
      --watermark-size:12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--accent);-webkit-font-smoothing:antialiased}
    .container{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}

    /* Card */
    .card{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:26px;padding:34px;box-shadow:var(--card-shadow);position:relative;overflow:hidden}

    /* cinematic glow */
    .card::after{content:"";position:absolute;inset:-20% -30% auto auto;width:300px;height:300px;background:radial-gradient(circle at 30% 30%, rgba(230,224,255,0.06), transparent 30%);filter:blur(40px);transform:translateY(-10%)}

    header{display:flex;gap:20px;align-items:center}
    .headline{flex:1}
    h1{margin:0;font-size:34px;letter-spacing:2px;text-transform:none}
    .sub{opacity:0.9;margin-top:6px;font-size:15px}

    /* portrait */
    .portrait-wrap{width:180px;height:180px;border-radius:999px;padding:6px;background:linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.04)}
    .portrait{width:160px;height:160px;border-radius:50%;object-fit:cover;display:block;transition:transform 420ms cubic-bezier(.2,.9,.2,1), box-shadow 420ms}
    .portrait-wrap:hover .portrait{transform:scale(1.04);box-shadow:0 20px 50px rgba(0,0,0,0.5)}
    .portrait-glow{position:absolute;pointer-events:none;mix-blend-mode:screen;filter:blur(12px);opacity:0.85}

    /* open gift */
    .actions{margin-top:26px;display:flex;gap:12px;align-items:center}
    .btn{background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.06);padding:12px 18px;border-radius:12px;color:var(--accent);font-weight:600;cursor:pointer;backdrop-filter:blur(6px);display:inline-flex;gap:10px;align-items:center}
    .btn:active{transform:translateY(1px)}
    .primary{background:linear-gradient(90deg, rgba(230,224,255,0.06), rgba(230,224,255,0.02));border:1px solid rgba(230,224,255,0.06)}

    /* footer */
    footer{display:flex;justify-content:space-between;align-items:center;margin-top:26px;padding-top:18px;border-top:1px solid rgba(255,255,255,0.02);font-size:13px;color:rgba(230,224,255,0.8)}

    /* modal (glassmorphism) */
    .modal-backdrop{position:fixed;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.65));display:flex;align-items:center;justify-content:center;z-index:120;opacity:0;pointer-events:none;transition:opacity 240ms}
    .modal{width:92%;max-width:720px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:18px;padding:22px;box-shadow:0 30px 80px rgba(0,0,0,0.6);transform:translateY(18px);transition:transform 320ms,opacity 320ms}
    .modal.show{transform:none}
    .modal-backdrop.show{opacity:1;pointer-events:auto}

    .modal .title{font-size:20px;margin:0 0 6px 0}
    .modal .msg{margin:8px 0 16px 0;line-height:1.4;color:rgba(230,224,255,0.95)}
    .modal .modal-actions{display:flex;gap:10px;align-items:center}

    /* watermark */
    .watermark{position:absolute;right:18px;bottom:14px;font-size:12px;opacity:0.7}

    /* sparkles */
    .sparkles{position:absolute;inset:0;pointer-events:none}
    .sparkle{position:absolute;width:6px;height:6px;background:radial-gradient(circle, rgba(230,224,255,0.95), rgba(230,224,255,0.1));border-radius:50%;opacity:0;animation:float 3500ms linear infinite}
    @keyframes float{0%{transform:translateY(10px) scale(.6);opacity:0}10%{opacity:1}50%{opacity:0.6;transform:translateY(-40px) scale(1.1)}100%{opacity:0;transform:translateY(-170px) scale(.4)}}

    /* responsive */
    @media (max-width:640px){
      .portrait-wrap{width:140px;height:140px}
      .portrait{width:124px;height:124px}
      h1{font-size:24px}
    }

    /* small helper */
    .muted{opacity:0.85;font-size:14px}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="main">
      <div class="sparkles" aria-hidden="true"></div>
      <header>
        <div class="headline">
          <h1>üåü Spotlight On: <span id="star-name">Kowsi</span></h1>
          <div class="sub">Grace in simplicity, charm in every smile ‚Äî Celebrating you today ‚ú®</div>
        </div>
        <div style="position:relative">
          <div class="portrait-wrap" title="Birthday Star">
            <!-- Replace the src with your GIF file path. -->
            <img id="portrait-img" class="portrait" src="assets/kowsi.gif" alt="Kowsi" draggable="false"/>
          </div>
        </div>
      </header>

      <section class="actions">
        <button id="openGift" class="btn primary">üéÅ Open Your Gift</button>
        <div class="muted">Want it private? Use share after opening the gift.</div>
      </section>

      <footer>
        <div>¬© CelebModeOn <span style="opacity:.6">|</span> Designed by Kevin</div>
        <div class="watermark">CelebModeOn</div>
      </footer>
    </div>
  </div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document">
      <h3 class="title">Happy Birthday, Kowsi üå∑</h3>
      <div class="msg" id="modalMessage">
        You‚Äôre today‚Äôs star ‚Äî radiant, kind, and unstoppable. Wishing you endless smiles and golden dreams ahead. ‚ú®
      </div>

      <div style="display:flex;gap:14px;align-items:center;flex-wrap:wrap">
        <!-- The preview card that will be exported -->
        <div id="previewCard" style="flex:1;min-width:200px;max-width:420px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:12px;display:flex;gap:12px;align-items:center;box-shadow:0 12px 30px rgba(0,0,0,0.45);">
          <img id="previewImg" src="kowsi.gif" alt="Kowsi preview" style="width:84px;height:84px;border-radius:10px;object-fit:cover;"/>
          <div style="flex:1">
            <div style="font-weight:700">Kowsi</div>
            <div style="opacity:.85;font-size:13px">Today‚Äôs Star ‚Ä¢ Celebrate with love</div>
          </div>
        </div>

        <div style="display:flex;flex-direction:column;gap:10px">
          <button id="downloadBtn" class="btn">üíæ Save as Memory</button>
          <button id="shareBtn" class="btn">üì§ Share</button>
          <button id="closeBtn" class="btn">‚úñ Close</button>
        </div>
      </div>

    </div>
  </div>

  <!-- small confetti canvas -->
  <canvas id="confetti" style="position:fixed;left:0;top:0;pointer-events:none;z-index:110"></canvas>

  <!-- html2canvas for export (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNa5s9V1m9Y1R1Qq1s0v4QkI0Yt3p3X1m4V9Lq2d8B+g6T9g0p7ZVdYf9tJ8Xb2q3c4k5T6u7v8w9x0y1z2w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    // --- small util for confetti ---
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');
    let confettiPieces = [];
    function resizeCanvas(){confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight}
    addEventListener('resize', resizeCanvas); resizeCanvas();
    function spawnConfetti(x,y){
      for(let i=0;i<36;i++){
        confettiPieces.push({x:x||innerWidth/2,y:y||innerHeight/2,dx:(Math.random()-0.5)*6,dy:(Math.random()*-8)-2,rot:Math.random()*360,w:6+Math.random()*10,h:8+Math.random()*10,life:80+Math.random()*60,color:`hsl(${Math.floor(Math.random()*60)+280},70%,70%)`})
      }
    }
    function animateConfetti(){
      ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      for(let i=confettiPieces.length-1;i>=0;i--){
        const p=confettiPieces[i]; p.x+=p.dx; p.y+=p.dy; p.dy+=0.24; p.rot+=3; p.life--;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180); ctx.fillStyle=p.color; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
        if(p.life<0||p.y>innerHeight+100) confettiPieces.splice(i,1);
      }
      requestAnimationFrame(animateConfetti);
    }
    animateConfetti();

    // --- DOM ---
    const openGift = document.getElementById('openGift');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const closeBtn = document.getElementById('closeBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const shareBtn = document.getElementById('shareBtn');
    const previewCard = document.getElementById('previewCard');

    function showModal(){
      modalBackdrop.classList.add('show');
      modalBackdrop.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      // small confetti burst
      spawnConfetti(innerWidth/2, innerHeight/2 - 60);
      setTimeout(()=>spawnConfetti(innerWidth/2 - 120, innerHeight/2 - 40),120);
      setTimeout(()=>spawnConfetti(innerWidth/2 + 120, innerHeight/2 - 40),200);
    }
    function hideModal(){
      modalBackdrop.classList.remove('show');
      modalBackdrop.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    openGift.addEventListener('click', showModal);
    closeBtn.addEventListener('click', hideModal);
    modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) hideModal(); });

    // download as image using html2canvas
    downloadBtn.addEventListener('click', async ()=>{
      downloadBtn.disabled = true; downloadBtn.textContent = 'Preparing...';
      try{
        // ensure the gif frame is rendered ‚Äî html2canvas will render current frame of animated GIF
        const canvas = await html2canvas(previewCard, {backgroundColor: null, scale: 2, useCORS: true});
        const dataUrl = canvas.toDataURL('image/png');
        const a = document.createElement('a'); a.href = dataUrl; a.download = `Kowsi_CelebModeOn_${Date.now()}.png`; document.body.appendChild(a); a.click(); a.remove();
        downloadBtn.textContent = 'Saved ‚úì';
      }catch(err){
        console.error(err); downloadBtn.textContent = 'Try Again';
      }finally{ setTimeout(()=>{downloadBtn.disabled=false; downloadBtn.textContent='üíæ Save as Memory'},1400)}
    });

    // Web Share
    shareBtn.addEventListener('click', async ()=>{
      // Export first
      shareBtn.disabled = true; shareBtn.textContent = 'Preparing...';
      try{
        const canvas = await html2canvas(previewCard, {backgroundColor: null, scale: 2, useCORS: true});
        const blob = await new Promise(res=>canvas.toBlob(res,'image/png'));
        const filesArray = [new File([blob], `Kowsi_CelebModeOn_${Date.now()}.png`, {type:'image/png'})];
        if(navigator.canShare && navigator.canShare({files: filesArray})){
          await navigator.share({files: filesArray, title: 'Happy Birthday Kowsi', text: 'Sent with love from CelebModeOn'});
          shareBtn.textContent = 'Shared ‚úì';
        }else{
          // fallback: open the image in new tab
          const url = URL.createObjectURL(blob); window.open(url, '_blank'); shareBtn.textContent = 'Opened';
        }
      }catch(err){ console.error(err); shareBtn.textContent = 'Failed'; }
      finally{ setTimeout(()=>{shareBtn.disabled=false;shareBtn.textContent='üì§ Share'},1400) }
    });

    // small random sparkles generator
    (function makeSparkles(){
      const container = document.querySelector('.sparkles');
      for(let i=0;i<14;i++){const s=document.createElement('div');s.className='sparkle';s.style.left=Math.random()*100+'%';s.style.top=60+Math.random()*60+'%';s.style.animationDelay=(Math.random()*3)+'s';s.style.transform=`scale(${0.4+Math.random()*1.2})`;container.appendChild(s)}
    })();

    // Safety: ensure image doesn't trigger accidental download on click
    document.getElementById('portrait-img').addEventListener('click', (e)=>{ e.preventDefault(); /* no download on image click */ });

    // Replace preview image srcs if user provides gif path via query param ?gif=path
    (function applyGifFromQuery(){
      try{
        const params = new URLSearchParams(location.search); const gif = params.get('gif'); if(gif){ document.getElementById('portrait-img').src=gif; document.getElementById('previewImg').src=gif; }
      }catch(e){/* ignore */}
    })();

  </script>
</body>
</html>